{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for handling photo uploads, deletions, and image compression in a Firebase Storage context, including uploading photos, deleting photos via URL, and compressing images before upload.", "external_files": ["../config/firebase"], "external_methods": ["ref", "uploadBytes", "getDownloadURL", "deleteObject"], "published": ["uploadPhoto", "deletePhoto", "compressImage"], "classes": [], "methods": [{"name": "uploadPhoto", "description": "Uploads a photo to Firebase Storage, returning the download URL.", "parameters": ["file (File) - Photo file to upload", "sessionId (string) - ID of the session this photo belongs to"], "returns": "Promise<string> - Download URL of uploaded photo"}, {"name": "deletePhoto", "description": "Deletes a photo from Firebase Storage given its URL.", "parameters": ["photoUrl (string) - URL of photo to delete"], "returns": null}, {"name": "compressImage", "description": "Compresses an image file before upload with optional max width and quality.", "parameters": ["file (File) - Image file to compress", "maxWidth (number, optional) - Maximum width for the compressed image, default 800", "quality (number, optional) - Compression quality 0-1, default 0.8"], "returns": "Promise<File> - Compressed image file"}], "calls": ["ref(storage, filename)", "uploadBytes(storageRef, file)", "getDownloadURL(snapshot.ref)", "decodeURIComponent(photoUrl)", "match(/\\/o\\/(.*?)\\?)/", "ref(storage, filePath)", "deleteObject(storageRef)", "URL.createObjectURL(file)", "canvas.toBlob"], "search-terms": ["firebase storage upload", "delete photo from firebase", "compress image client-side", "firebase delete by URL", "photo upload session"], "state": 2, "file_id": 18, "knowledge_revision": 39, "git_revision": "", "ctags": [{"_type": "tag", "name": "compressImage", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^export const compressImage = (file, maxWidth = 800, quality = 0.8) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "decodedUrl", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^    const decodedUrl = decodeURIComponent(photoUrl);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "deletePhoto", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^export const deletePhoto = async (photoUrl) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "downloadURL", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^    const downloadURL = await getDownloadURL(snapshot.ref);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "filePath", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^      const filePath = pathMatch[1];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "filename", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^    const filename = `sessions\\/${sessionId}\\/${timestamp}_${file.name}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "pathMatch", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^    const pathMatch = decodedUrl.match(\\/\\\\\\/o\\\\\\/(.*?)\\\\?\\/);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "snapshot", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^    const snapshot = await uploadBytes(storageRef, file);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "storageRef", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^      const storageRef = ref(storage, filePath);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "storageRef", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^    const storageRef = ref(storage, filename);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^    const timestamp = Date.now();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "uploadPhoto", "path": "/home/kavia/workspace/code-generation/surfsense-159763-159772/surf_buddy_frontend/src/services/photoUpload.js", "pattern": "/^export const uploadPhoto = async (file, sessionId) => {$/", "language": "JavaScript", "kind": "constant"}], "hash": "2c33d9e188dc7330e37bff244a187a61", "format-version": 4, "code-base-name": "surf_buddy_frontend", "filename": "surf_buddy_frontend/src/services/photoUpload.js", "revision_history": [{"39": ""}]}